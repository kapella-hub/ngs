# =============================================================================
# NGS (NoiseGate Service) Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
POSTGRES_USER=ngs
POSTGRES_PASSWORD=CHANGE_ME_IN_PRODUCTION
POSTGRES_DB=ngs
POSTGRES_PORT=5432

# -----------------------------------------------------------------------------
# Email Provider Configuration
# -----------------------------------------------------------------------------
# Options:
#   - "file"    : Watch a folder for .eml/.msg files (easiest for testing)
#   - "outlook" : Read from Outlook desktop via COM (Windows only, run worker locally)
#   - "graph"   : Microsoft Graph API for Office 365 (requires Azure AD app)
#   - "imap"    : Traditional IMAP (requires username/password, no 2FA)
EMAIL_PROVIDER=file

# -----------------------------------------------------------------------------
# File-based Configuration (when EMAIL_PROVIDER=file)
# Easiest for testing - just drag emails from Outlook to this folder
# -----------------------------------------------------------------------------
FILE_WATCH_PATH=./watch

# -----------------------------------------------------------------------------
# IMAP Configuration (when EMAIL_PROVIDER=imap)
# -----------------------------------------------------------------------------
IMAP_HOST=imap.example.com
IMAP_PORT=993
IMAP_SSL=true
IMAP_USER=alerts@example.com
IMAP_PASSWORD=CHANGE_ME

# -----------------------------------------------------------------------------
# Microsoft Graph Configuration (when EMAIL_PROVIDER=graph)
# For Office 365 / Outlook with OAuth 2.0 / 2FA
# -----------------------------------------------------------------------------
# To set up:
# 1. Go to Azure Portal > Azure Active Directory > App registrations
# 2. Create a new registration (e.g., "NGS Email Reader")
# 3. API permissions > Add permission > Microsoft Graph > Application permissions:
#    - Mail.Read (or Mail.ReadBasic.All for metadata only)
# 4. Grant admin consent for your organization
# 5. Certificates & secrets > New client secret
# 6. Copy Tenant ID, Application (client) ID, and the secret value

GRAPH_TENANT_ID=your-tenant-id-here
GRAPH_CLIENT_ID=your-client-id-here
GRAPH_CLIENT_SECRET=your-client-secret-here
GRAPH_USER_EMAIL=alerts@yourcompany.com

# -----------------------------------------------------------------------------
# Folder Configuration (applies to both IMAP and Graph)
# -----------------------------------------------------------------------------
# Comma-separated list of folders to monitor
# Each folder represents a source stream (e.g., OP5, XYMON, Splunk, MAINTENANCE)
IMAP_FOLDERS=Inbox,OP5,XYMON,Splunk,Nagios,MAINTENANCE

# Polling interval in seconds
IMAP_POLL_INTERVAL_SECONDS=60

# How many days back to fetch on initial setup
IMAP_INITIAL_BACKFILL_DAYS=7

# -----------------------------------------------------------------------------
# RAG Integration
# -----------------------------------------------------------------------------
RAG_ENDPOINT=http://rag-mock:8080/enrich
RAG_ENABLED=true
RAG_TIMEOUT_SECONDS=30

# -----------------------------------------------------------------------------
# API Configuration
# -----------------------------------------------------------------------------
API_PORT=8000
JWT_SECRET=CHANGE_ME_USE_STRONG_SECRET_IN_PRODUCTION
LOG_LEVEL=INFO
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
FRONTEND_PORT=3000
VITE_API_URL=http://localhost:8000

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# RAG Mock (dev only)
# -----------------------------------------------------------------------------
RAG_MOCK_PORT=8080

# -----------------------------------------------------------------------------
# Security & Redaction
# -----------------------------------------------------------------------------
# Comma-separated regex patterns for redacting sensitive data in AI payloads
# Example: password=\S+,api_key=\S+,secret=\S+
REDACTION_PATTERNS=password=\S+,api[_-]?key=\S+,secret=\S+,token=\S+,bearer\s+\S+

# -----------------------------------------------------------------------------
# Retention Policies (days)
# -----------------------------------------------------------------------------
RAW_EMAIL_RETENTION_DAYS=90
INCIDENT_RETENTION_DAYS=365
AUDIT_LOG_RETENTION_DAYS=365

# -----------------------------------------------------------------------------
# Microsoft Graph (Phase 2 - Calendar Integration)
# -----------------------------------------------------------------------------
# GRAPH_TENANT_ID=
# GRAPH_CLIENT_ID=
# GRAPH_CLIENT_SECRET=
# GRAPH_CALENDAR_ID=
